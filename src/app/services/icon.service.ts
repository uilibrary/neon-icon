import { Injectable } from '@angular/core';
import { of, Observable, combineLatest } from 'rxjs';
import { startWith, debounceTime, switchMap } from 'rxjs/operators';
import { FormGroup } from '@angular/forms';

interface Icon {
  name: string;
  variations: any;
}

@Injectable({
  providedIn: 'root'
})
export class IconService {
  initialFilters = {
    weight: 'light',
    rounded: true
  };

  iconList = [
    'add-1-bold-rounded',
    'add-1-bold',
    'add-1-light-rounded',
    'add-1-light',
    'add-1-medium-rounded',
    'add-1-medium',
    'add-bold-rounded',
    'add-bold',
    'add-light-rounded',
    'add-light',
    'add-medium-rounded',
    'add-medium',
    'airplane-bold',
    'airplane-light',
    'airplane-medium',
    'align-bottom-bold',
    'align-bottom-light',
    'align-bottom-medium',
    'align-center-bold',
    'align-center-light',
    'align-center-medium',
    'align-center-vertical-bold',
    'align-center-vertical-light',
    'align-left-bold',
    'align-left-light',
    'align-left-medium',
    'align-light',
    'align-right-bold',
    'align-right-light',
    'align-right-medium',
    'align-top-bold',
    'align-top-light',
    'align-top-medium',
    'arrow-down-1-bold',
    'arrow-down-1-light',
    'arrow-down-1-medium',
    'arrow-down-bold',
    'arrow-down-light',
    'arrow-down-medium',
    'arrow-left-1-bold',
    'arrow-left-1-light',
    'arrow-left-1-medium',
    'arrow-left-bold',
    'arrow-left-light',
    'arrow-left-medium',
    'arrow-right-1-bold',
    'arrow-right-1-light',
    'arrow-right-1-medium',
    'arrow-right-bold',
    'arrow-right-light',
    'arrow-right-medium',
    'arrow-up-1-bold',
    'arrow-up-1-light',
    'arrow-up-1-medium',
    'arrow-up-bold',
    'arrow-up-light',
    'arrow-up-medium',
    'bin-bold',
    'bin-light',
    'bin-medium',
    'book-bold',
    'book-light',
    'book-medium',
    'books-bold',
    'books-light',
    'books-medium',
    'briefcase-bold',
    'briefcase-light',
    'briefcase-medium',
    'browser-outline-bold',
    'browser-outline-light',
    'browser-outline-medium',
    'brush-bold-rounded',
    'brush-bold',
    'brush-light-rounded',
    'brush-light',
    'brush-medium-rounded',
    'brush-medium',
    'bubble-chat-bold-2',
    'bubble-chat-bold',
    'bubble-chat-light-2',
    'bubble-chat-light',
    'bubble-chat-medium-2',
    'bubble-chat-medium',
    'bucket-bold',
    'bucket-light',
    'bucket-medium',
    'calendar-bold',
    'calendar-light',
    'calendar-medium',
    'camera-bold-rounded',
    'camera-bold',
    'camera-light-rounded',
    'camera-light',
    'camera-medium-rounded',
    'camera-medium',
    'cancel-1-bold-rounded',
    'cancel-1-bold',
    'cancel-1-light-rounded',
    'cancel-1-light',
    'cancel-1-medium-rounded',
    'cancel-1-medium',
    'cancel-bold',
    'cancel-light',
    'cancel-medium',
    'car-bold',
    'car-light',
    'car-medium',
    'chart-bold-rounded',
    'chart-bold',
    'chart-light-rounded',
    'chart-light',
    'chart-medium-rounded',
    'chart-medium',
    'clipboard-bold',
    'clipboard-light',
    'clipboard-medium',
    'clock-bold',
    'clock-light',
    'clock-medium',
    'closed-eye-bold',
    'closed-eye-light',
    'closed-eye-medium',
    'cloud-bold-01',
    'cloud-download-bold-rounded',
    'cloud-download-bold',
    'cloud-download-light-rounded',
    'cloud-download-light',
    'cloud-download-medium-rounded',
    'cloud-download-medium',
    'cloud-light-01',
    'cloud-medium-01',
    'cloud-upload-bold-rounded',
    'cloud-upload-bold',
    'cloud-upload-light-rounded',
    'cloud-upload-light',
    'cloud-upload-medium-rounded',
    'cloud-upload-medium',
    'computer-bold',
    'computer-light',
    'computer-medium',
    'copy-bold',
    'copy-light',
    'copy-medium',
    'crop-bold',
    'crop-light',
    'crop-medium',
    'cursor-bold',
    'cursor-light',
    'cursor-medium',
    'database-bold',
    'database-light',
    'database-medium',
    'drop-bold',
    'drop-light',
    'drop-medium',
    'dropper-bold-rounded',
    'dropper-bold',
    'dropper-light-rounded',
    'dropper-light',
    'dropper-medium-rounded',
    'dropper-medium',
    'earth-bold',
    'earth-light',
    'earth-medium',
    'edit-bold',
    'edit-light',
    'edit-medium',
    'envelope-bold-rounded',
    'envelope-bold',
    'envelope-light-rounded',
    'envelope-light',
    'envelope-medium-rounded',
    'envelope-medium',
    'file-add-bold',
    'file-add-light',
    'file-add-medium',
    'file-bold',
    'file-cancel-bold',
    'file-cancel-light',
    'file-cancel-medium',
    'file-download-bold',
    'file-download-light',
    'file-download-medium',
    'file-eye-bold',
    'file-eye-light',
    'file-eye-medium',
    'file-light',
    'file-medium',
    'file-minus-bold',
    'file-minus-light',
    'file-minus-medium',
    'file-text-bold',
    'file-text-light',
    'file-text-medium',
    'file-upload-bold',
    'file-upload-light',
    'file-upload-medium',
    'file-zip-bold',
    'file-zip-light',
    'file-zip-medium',
    'folder-add-bold',
    'folder-add-light',
    'folder-add-medium',
    'folder-bold',
    'folder-download-bold',
    'folder-download-light',
    'folder-download-medium',
    'folder-light',
    'folder-medium',
    'folder-upload-bold',
    'folder-upload-light',
    'folder-upload-medium',
    'gift-bold',
    'gift-light',
    'gift-medium',
    'grid-bold',
    'grid-light',
    'grid-medium',
    'headphone-bold',
    'headphone-light',
    'headphone-medium',
    'home-bold',
    'home-light',
    'home-medium',
    'imag-bold',
    'imag-light',
    'imag-medium',
    'info-bold',
    'info-light',
    'info-medium',
    'justify-bold',
    'justify-medium',
    'key-bold-rounded',
    'key-bold',
    'key-light-rounded',
    'key-light',
    'key-medium-rounded',
    'key-medium',
    'ladder-bold',
    'ladder-light',
    'ladder-medium',
    'layer-bold',
    'layer-light',
    'layer-medium',
    'layout-bold',
    'layout-light',
    'layout-medium',
    'link-bold-rounded',
    'link-bold',
    'link-light-rounded',
    'link-light',
    'link-medium-rounded',
    'link-medium',
    'list-2-bold',
    'list-2-light',
    'list-2-medium',
    'list-bold',
    'list-light',
    'list-medium',
    'list-number-bold',
    'list-number-light',
    'list-number-medium',
    'location-bold',
    'location-light',
    'location-medium',
    'lock-bold-rounded',
    'lock-bold',
    'lock-light-rounded',
    'lock-light',
    'lock-medium-rounded',
    'lock-medium',
    'madel-bold',
    'madel-light',
    'madel-medium',
    'main',
    'main-file',
    'menu-bold-rounded',
    'menu-bold',
    'menu-light-rounded',
    'menu-light',
    'menu-medium-rounded',
    'menu-medium',
    'meter-bold',
    'meter-light',
    'meter-medium',
    'mobile-bold',
    'mobile-light',
    'mobile-medium',
    'more-horezontal-bold',
    'more-horezontal-light',
    'more-horezontal-medium',
    'more-vertical-bold',
    'more-vertical-light',
    'more-vertical-medium',
    'music-bold',
    'music-light',
    'music-medium',
    'notification-bold',
    'notification-light',
    'notification-medium',
    'open-eye-bold',
    'open-eye-light',
    'open-eye-medium',
    'palette-bold',
    'palette-light',
    'palette-medium',
    'paperplane-bold',
    'paperplane-light',
    'paperplane-medium',
    'paste-bold',
    'paste-light',
    'paste-medium',
    'pen-bold',
    'pen-light',
    'pen-medium',
    'phone-bold',
    'phone-light',
    'phone-medium',
    'pie-chart-bold',
    'pie-chart-light',
    'pie-chart-medium',
    'price-tag-bold',
    'price-tag-light',
    'price-tag-medium',
    'printer-bold',
    'printer-light',
    'printer-medium',
    'radio-button-bold',
    'radio-button-light',
    'radio-button-medium',
    'record-bold',
    'record-light',
    'record-medium',
    'record-stop-bold',
    'record-stop-light',
    'record-stop-medium',
    'right-1-bold',
    'right-1-light',
    'right-1-medium',
    'right-bold',
    'right-double-bold',
    'right-double-light',
    'right-double-medium',
    'right-light',
    'right-medium',
    'search-bold',
    'search-light',
    'search-medium',
    'setting-bold',
    'setting-light',
    'setting-medium',
    'square-bold-rounded',
    'square-bold',
    'square-light-rounded',
    'square-light',
    'square-medium-rounded',
    'square-medium',
    'star',
    'star-bold',
    'star-light',
    'star-medium',
    'station-bold',
    'station-light',
    'station-medium',
    'stats-bar-bold',
    'stats-bar-light',
    'stats-bar-medium',
    'stats-decline-bold',
    'stats-decline-light',
    'stats-decline-medium',
    'stats-growth-bold',
    'stats-growth-light',
    'stats-growth-medium',
    'support-bold',
    'support-light',
    'support-medium',
    'trophy-bold',
    'trophy-light',
    'trophy-medium',
    'unlock-bold',
    'unlock-light',
    'unlock-medium',
    'user-bold-01',
    'user-bold-rounded-01',
    'user-light-01',
    'user-light-rounded-01',
    'user-medium-01',
    'user-medium-rounded-01',
    'users-bold',
    'users-light',
    'users-medium',
    'users-minus-bold',
    'users-minus-light',
    'users-minus-medium',
    'users-plus-bold',
    'users-plus-light',
    'users-plus-medium',
    'videocamera-bold',
    'videocamera-light',
    'videocamera-medium',
    'videostop-bold',
    'videostop-light',
    'videostop-medium',
    'web-earth-bold',
    'web-earth-light',
    'web-earth-medium',
    'wifi-bold',
    'wifi-light',
    'wifi-medium',
    'wifi-off-bold',
    'wifi-off-light',
    'wifi-off-medium',
    'zoom-in-bold',
    'zoom-in-light',
    'zoom-in-medium',
    'zoom-out-bold',
    'zoom-out-light',
    'zoom-out-medium'
  ];
  
  constructor() {}

  getIcons(): Observable<string[]> {
    return of(this.iconList);
  }

  getFilteredIcons(filterForm: FormGroup) {
    return combineLatest(
      this.getIcons(),
      filterForm.valueChanges.pipe(
        startWith(this.initialFilters),
        debounceTime(400)
      )
    ).pipe(
      switchMap(([icons, filterData]) => {
        return this.filterIcons(icons, filterData);
      })
    );
  }
  filterIcons(icons: string[], filterData) {
    // console.log(filterData);
    // {weight: 'light', rounded: true}
    let filteredIcons = [];
    filteredIcons = icons.filter(i => {
      if (i.indexOf(filterData.weight) !== -1) {
        return true;
      }
    })
    .filter(i => {
      if (filterData.rounded && i.indexOf('rounded') !== -1) {
        return true;
      } else if(!filterData.rounded && i.indexOf('rounded') === -1) {
        return true;
      }
    });

    return of(filteredIcons)
  }
}
